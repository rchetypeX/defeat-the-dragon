"use strict";exports.id=46,exports.ids=[46],exports.modules={3967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.actionMetadata=void 0,t.actionForMinutes=function(e){let t=Math.max(5,Math.min(120,Math.round(e)));return t<=15?"Train":t<=30?"Eat":t<=45?"Learn":t<=60?"Bathe":t<=75?"Sleep":t<=90?"Maintain":t<=105?"Fight":"Adventure"},t.getValidDurations=function(){let e=[];for(let t=5;t<=120;t+=5)e.push(t);return e},t.isValidDuration=function(e){return e>=5&&e<=120&&e%5==0},t.actionMetadata={Train:{emoji:"⚔️",label:"Train",description:"Practice combat skills and build strength",background:"campfire",idleAnimation:"training"},Eat:{emoji:"\uD83C\uDF4E",label:"Eat",description:"Restore energy with a hearty meal",background:"kitchen",idleAnimation:"eating"},Learn:{emoji:"\uD83E\uDDE0",label:"Learn",description:"Study ancient knowledge and spells",background:"library",idleAnimation:"studying"},Bathe:{emoji:"\uD83D\uDEC1",label:"Bathe",description:"Clean and refresh your spirit",background:"bathhouse",idleAnimation:"bathing"},Sleep:{emoji:"\uD83D\uDE34",label:"Sleep",description:"Rest and recover your strength",background:"bedroll",idleAnimation:"sleeping"},Maintain:{emoji:"\uD83D\uDD27",label:"Maintain",description:"Care for your equipment and gear",background:"workshop",idleAnimation:"maintaining"},Fight:{emoji:"⚡",label:"Fight",description:"Engage in intense combat training",background:"arena",idleAnimation:"fighting"},Adventure:{emoji:"\uD83D\uDDFA️",label:"Adventure",description:"Explore unknown territories",background:"cave_mouth",idleAnimation:"exploring"}}},6132:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.xpProgressToNextLevel=t.xpForNextLevel=t.computeLevel=t.computeSparks=t.computeCoins=t.computeXP=void 0;let i={5:{xpMin:5,xpMax:6,goldMin:3,goldMax:3,sparks:0},10:{xpMin:10,xpMax:12,goldMin:6,goldMax:7,sparks:0},15:{xpMin:16,xpMax:18,goldMin:9,goldMax:10,sparks:1},20:{xpMin:22,xpMax:25,goldMin:13,goldMax:15,sparks:1},25:{xpMin:28,xpMax:32,goldMin:16,goldMax:19,sparks:1},30:{xpMin:34,xpMax:39,goldMin:20,goldMax:23,sparks:2},35:{xpMin:41,xpMax:47,goldMin:24,goldMax:28,sparks:2},40:{xpMin:48,xpMax:55,goldMin:28,goldMax:33,sparks:2},45:{xpMin:55,xpMax:63,goldMin:33,goldMax:37,sparks:3},50:{xpMin:62,xpMax:71,goldMin:37,goldMax:42,sparks:3},55:{xpMin:70,xpMax:80,goldMin:42,goldMax:48,sparks:3},60:{xpMin:78,xpMax:89,goldMin:46,goldMax:53,sparks:4},65:{xpMin:86,xpMax:98,goldMin:51,goldMax:58,sparks:4},70:{xpMin:94,xpMax:108,goldMin:56,goldMax:64,sparks:4},75:{xpMin:103,xpMax:118,goldMin:61,goldMax:70,sparks:5},80:{xpMin:112,xpMax:128,goldMin:67,goldMax:76,sparks:5},85:{xpMin:121,xpMax:138,goldMin:72,goldMax:82,sparks:5},90:{xpMin:130,xpMax:149,goldMin:78,goldMax:89,sparks:6},95:{xpMin:140,xpMax:160,goldMin:84,goldMax:96,sparks:6},100:{xpMin:150,xpMax:171,goldMin:90,goldMax:102,sparks:6},105:{xpMin:158,xpMax:180,goldMin:94,goldMax:108,sparks:7},110:{xpMin:165,xpMax:188,goldMin:99,goldMax:112,sparks:7},115:{xpMin:172,xpMax:197,goldMin:103,goldMax:118,sparks:7},120:{xpMin:180,xpMax:205,goldMin:108,goldMax:123,sparks:8}},a=e=>{let t=Object.keys(i).map(Number).sort((e,t)=>e-t),a=t[0];for(let i of t)if(e>=i)a=i;else break;return i[a]},n=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;t.computeXP=(e,t,i)=>{let u=a(e);return Math.round(n(u.xpMin,u.xpMax)*(o[t]||1)*(1+.02*Math.min(i,7)))};let o={Train:1,Eat:.5,Learn:1.05,Bathe:.4,Sleep:.25,Maintain:.8,Fight:1.2,Adventure:1.15};t.computeCoins=e=>{let t=a(e);return n(t.goldMin,t.goldMax)},t.computeSparks=(e,t)=>t?a(e).sparks:0;let u={1:{xpToNext:50,cumulativeXP:17},2:{xpToNext:83,cumulativeXP:67},3:{xpToNext:117,cumulativeXP:150},4:{xpToNext:150,cumulativeXP:267},5:{xpToNext:183,cumulativeXP:417},6:{xpToNext:217,cumulativeXP:600},7:{xpToNext:250,cumulativeXP:817},8:{xpToNext:283,cumulativeXP:1067},9:{xpToNext:317,cumulativeXP:1350},10:{xpToNext:350,cumulativeXP:1667},11:{xpToNext:383,cumulativeXP:2017},12:{xpToNext:417,cumulativeXP:2400},13:{xpToNext:450,cumulativeXP:2817},14:{xpToNext:483,cumulativeXP:3267},15:{xpToNext:517,cumulativeXP:3750},16:{xpToNext:550,cumulativeXP:4267},17:{xpToNext:583,cumulativeXP:4817},18:{xpToNext:617,cumulativeXP:5400},19:{xpToNext:650,cumulativeXP:6017},20:{xpToNext:683,cumulativeXP:6667},21:{xpToNext:717,cumulativeXP:7350},22:{xpToNext:750,cumulativeXP:8067},23:{xpToNext:783,cumulativeXP:8817},24:{xpToNext:817,cumulativeXP:9600},25:{xpToNext:850,cumulativeXP:10417},26:{xpToNext:883,cumulativeXP:11267},27:{xpToNext:917,cumulativeXP:12150},28:{xpToNext:950,cumulativeXP:13067},29:{xpToNext:983,cumulativeXP:14017},30:{xpToNext:1017,cumulativeXP:15e3},31:{xpToNext:1050,cumulativeXP:16017},32:{xpToNext:1083,cumulativeXP:17067},33:{xpToNext:1117,cumulativeXP:18150},34:{xpToNext:1150,cumulativeXP:19267},35:{xpToNext:1183,cumulativeXP:20417},36:{xpToNext:1217,cumulativeXP:21600},37:{xpToNext:1250,cumulativeXP:22817},38:{xpToNext:1283,cumulativeXP:24067},39:{xpToNext:1317,cumulativeXP:25350},40:{xpToNext:1350,cumulativeXP:26667},41:{xpToNext:1383,cumulativeXP:28017},42:{xpToNext:1417,cumulativeXP:29400},43:{xpToNext:1450,cumulativeXP:30817},44:{xpToNext:1483,cumulativeXP:32267},45:{xpToNext:1517,cumulativeXP:33750},46:{xpToNext:1550,cumulativeXP:35267},47:{xpToNext:1583,cumulativeXP:36817},48:{xpToNext:1617,cumulativeXP:38400},49:{xpToNext:1650,cumulativeXP:40017},50:{xpToNext:1683,cumulativeXP:41667},51:{xpToNext:1717,cumulativeXP:43350},52:{xpToNext:1750,cumulativeXP:45067},53:{xpToNext:1783,cumulativeXP:46817},54:{xpToNext:1817,cumulativeXP:48600},55:{xpToNext:1850,cumulativeXP:50417},56:{xpToNext:1883,cumulativeXP:52267},57:{xpToNext:1917,cumulativeXP:54150},58:{xpToNext:1950,cumulativeXP:56067},59:{xpToNext:1983,cumulativeXP:58017},60:{xpToNext:2017,cumulativeXP:6e4},61:{xpToNext:2050,cumulativeXP:62017},62:{xpToNext:2083,cumulativeXP:64067},63:{xpToNext:2117,cumulativeXP:66150},64:{xpToNext:2150,cumulativeXP:68267},65:{xpToNext:2183,cumulativeXP:70417},66:{xpToNext:2217,cumulativeXP:72600},67:{xpToNext:2250,cumulativeXP:74817},68:{xpToNext:2283,cumulativeXP:77067},69:{xpToNext:2317,cumulativeXP:79350},70:{xpToNext:2350,cumulativeXP:81667},71:{xpToNext:2383,cumulativeXP:84017},72:{xpToNext:2417,cumulativeXP:86400},73:{xpToNext:2450,cumulativeXP:88817},74:{xpToNext:2483,cumulativeXP:91267},75:{xpToNext:2517,cumulativeXP:93750},76:{xpToNext:2550,cumulativeXP:96267},77:{xpToNext:2583,cumulativeXP:98817},78:{xpToNext:2617,cumulativeXP:101400},79:{xpToNext:2650,cumulativeXP:104017},80:{xpToNext:2683,cumulativeXP:106667},81:{xpToNext:2717,cumulativeXP:109350},82:{xpToNext:2750,cumulativeXP:112067},83:{xpToNext:2783,cumulativeXP:114817},84:{xpToNext:2817,cumulativeXP:117600},85:{xpToNext:2850,cumulativeXP:120417},86:{xpToNext:2883,cumulativeXP:123267},87:{xpToNext:2917,cumulativeXP:126150},88:{xpToNext:2950,cumulativeXP:129067},89:{xpToNext:2983,cumulativeXP:132017},90:{xpToNext:3017,cumulativeXP:135e3},91:{xpToNext:3050,cumulativeXP:138017},92:{xpToNext:3083,cumulativeXP:141067},93:{xpToNext:3117,cumulativeXP:144150},94:{xpToNext:3150,cumulativeXP:147267},95:{xpToNext:3183,cumulativeXP:150417},96:{xpToNext:3217,cumulativeXP:153600},97:{xpToNext:3250,cumulativeXP:156817},98:{xpToNext:3283,cumulativeXP:160067},99:{xpToNext:3317,cumulativeXP:163350}};t.computeLevel=e=>{for(let t=99;t>=1;t--)if(e>=u[t].cumulativeXP)return t;return 1},t.xpForNextLevel=e=>e>=99?0:u[e].xpToNext,t.xpProgressToNextLevel=e=>{let i=(0,t.computeLevel)(e);if(i>=99)return 1;let a=u[i].cumulativeXP;return Math.max(0,Math.min(1,(e-a)/(u[i+1].cumulativeXP-a)))}},8046:(e,t,i)=>{var a=Object.create?function(e,t,i,a){void 0===a&&(a=i);var n=Object.getOwnPropertyDescriptor(t,i);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,n)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]},n=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(6132),t),n(i(690),t),n(i(3293),t),n(i(3967),t)},690:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rollLoot=t.SAMPLE_LOOT_ITEMS=t.LootRNG=t.LootType=t.LootRarity=void 0;let a=i(4705);t.LootRarity=a.z.enum(["C","U","R","SR","SSR"]),t.LootType=a.z.enum(["cosmetic","pet","trinket"]);let n={C:55,U:25,R:12,SR:6,SSR:2};class o{constructor(e){this.seed=e.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)&4294967295,0)}next(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280}rollRarity(e,t){let i=Math.min(e/25*.05,.25),a=t?.1:0,o=this.next(),u=0,r={...n};a>0&&(r.R+=.3*a,r.SR+=.4*a,r.SSR+=.3*a,r.C-=a),r.U+=.3*i,r.R+=.4*i,r.SR+=.2*i,r.SSR+=.1*i,r.C-=i;let s=Object.values(r).reduce((e,t)=>e+t,0);for(let[e,t]of(Object.keys(r).forEach(e=>{r[e]=r[e]/s*100}),Object.entries(r)))if(o<=(u+=t)/100)return e;return"C"}rollItem(e,t){let i=t.filter(t=>t.rarity===e);if(0===i.length)return null;let a=Math.floor(this.next()*i.length);return i[a]}}t.LootRNG=o,t.SAMPLE_LOOT_ITEMS=[{sku:"trinket_01",name:"Lucky Coin",rarity:"C",type:"trinket",minLevel:1},{sku:"trinket_02",name:"Focus Crystal",rarity:"C",type:"trinket",minLevel:1},{sku:"trinket_03",name:"Study Stone",rarity:"C",type:"trinket",minLevel:1},{sku:"decor_01",name:"Scholar's Lamp",rarity:"U",type:"cosmetic",minLevel:1},{sku:"decor_02",name:"Focus Fountain",rarity:"U",type:"cosmetic",minLevel:1},{sku:"decor_03",name:"Wisdom Tree",rarity:"U",type:"cosmetic",minLevel:1},{sku:"skin_frag_01",name:"Hero's Cape Fragment",rarity:"R",type:"cosmetic",minLevel:1},{sku:"skin_frag_02",name:"Mage's Robe Fragment",rarity:"R",type:"cosmetic",minLevel:1},{sku:"skin_frag_03",name:"Warrior's Armor Fragment",rarity:"R",type:"cosmetic",minLevel:1},{sku:"pet_shard_01",name:"Dragon Egg Shard",rarity:"SR",type:"pet",minLevel:1},{sku:"pet_shard_02",name:"Phoenix Egg Shard",rarity:"SR",type:"pet",minLevel:1},{sku:"pet_shard_03",name:"Unicorn Egg Shard",rarity:"SR",type:"pet",minLevel:1},{sku:"pet_01",name:"Mini Dragon",rarity:"SSR",type:"pet",minLevel:1},{sku:"pet_02",name:"Phoenix Companion",rarity:"SSR",type:"pet",minLevel:1},{sku:"pet_03",name:"Unicorn Friend",rarity:"SSR",type:"pet",minLevel:1}],t.rollLoot=(e,i,a,n)=>{let u=new o(e),r=u.rollRarity(i,n),s=t.SAMPLE_LOOT_ITEMS.filter(e=>e.minLevel<=a);return u.rollItem(r,s)}},3293:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PushSubscribeRequest=t.BossResolveRequest=t.BossStartRequest=t.CompleteSessionResponse=t.CompleteSessionRequest=t.StartSessionResponse=t.StartSessionRequest=t.SubscriptionSchema=t.PushSubscriptionSchema=t.LootSchema=t.ClassSchema=t.ShopItemSchema=t.InventorySchema=t.SessionSchema=t.PlayerSchema=t.ProfileSchema=t.MoodState=t.PlayerClass=t.BossTier=t.SessionOutcome=t.SessionAction=void 0;let a=i(4705);t.SessionAction=a.z.nativeEnum({Train:"Train",Eat:"Eat",Learn:"Learn",Bathe:"Bathe",Sleep:"Sleep",Maintain:"Maintain",Fight:"Fight",Adventure:"Adventure"}),t.SessionOutcome=a.z.enum(["success","fail","early_stop"]),t.BossTier=a.z.enum(["none","mini","big"]),t.PlayerClass=a.z.enum(["Fighter","Rogue","Wizard","Cleric","Ranger"]),t.MoodState=a.z.enum(["Warm","Happy","Excited","Focused","Determined"]),t.ProfileSchema=a.z.object({user_id:a.z.string().uuid(),display_name:a.z.string().min(1).max(50),created_at:a.z.string().datetime()}),t.PlayerSchema=a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid(),level:a.z.number().int().min(1),xp:a.z.number().int().min(0),coins:a.z.number().int().min(0),sparks:a.z.number().int().min(0),is_inspired:a.z.boolean(),bond_score:a.z.number().int().min(0).max(100),mood_state:t.MoodState,day_streak:a.z.number().int().min(0),created_at:a.z.string().datetime(),display_name:a.z.string().min(1).max(50).optional()}),t.SessionSchema=a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid(),action:t.SessionAction,started_at:a.z.string().datetime(),ended_at:a.z.string().datetime().optional(),outcome:t.SessionOutcome.optional(),disturbed_seconds:a.z.number().int().min(0).default(0),dungeon_floor:a.z.number().int().min(0).default(0),boss_tier:t.BossTier.default("none")}),t.InventorySchema=a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid(),sku:a.z.string(),type:a.z.enum(["cosmetic","pet","trinket"]),qty:a.z.number().int().min(1).default(1),equipped:a.z.boolean().default(!1)}),t.ShopItemSchema=a.z.object({sku:a.z.string(),name:a.z.string(),price_coins:a.z.number().int().min(0),price_sparks:a.z.number().int().min(0),type:a.z.string(),class_lock:a.z.string().optional(),min_level:a.z.number().int().min(1).default(1)}),t.ClassSchema=a.z.object({user_id:a.z.string().uuid(),class_id:a.z.string(),unlocked:a.z.boolean(),quest_state:a.z.record(a.z.any())}),t.LootSchema=a.z.object({id:a.z.string().uuid(),session_id:a.z.string().uuid(),sku:a.z.string(),rarity:a.z.enum(["C","U","R","SR","SSR"])}),t.PushSubscriptionSchema=a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid(),endpoint:a.z.string().url(),p256dh:a.z.string(),auth:a.z.string()}),t.SubscriptionSchema=a.z.object({user_id:a.z.string().uuid(),provider:a.z.string(),status:a.z.string(),expires_at:a.z.string().datetime().optional()}),t.StartSessionRequest=a.z.object({action:t.SessionAction,duration_minutes:a.z.number().int().min(5).max(120)}),t.StartSessionResponse=a.z.object({session_id:a.z.string().uuid(),expected_end_time:a.z.string().datetime(),nonce:a.z.string()}),t.CompleteSessionRequest=a.z.object({session_id:a.z.string().uuid(),actual_duration_minutes:a.z.number().int().min(0),disturbed_seconds:a.z.number().int().min(0),outcome:t.SessionOutcome}),t.CompleteSessionResponse=a.z.object({xp_gained:a.z.number().int().min(0),coins_gained:a.z.number().int().min(0),sparks_gained:a.z.number().int().min(0),level_up:a.z.boolean(),new_level:a.z.number().int().min(1),streak_updated:a.z.boolean(),new_streak:a.z.number().int().min(0),loot:a.z.array(a.z.object({sku:a.z.string(),name:a.z.string(),rarity:a.z.string(),type:a.z.string()})).optional()}),t.BossStartRequest=a.z.object({boss_tier:t.BossTier,duration_hours:a.z.number().int().min(1).max(24)}),t.BossResolveRequest=a.z.object({boss_id:a.z.string().uuid()}),t.PushSubscribeRequest=a.z.object({endpoint:a.z.string().url(),p256dh:a.z.string(),auth:a.z.string()})}};